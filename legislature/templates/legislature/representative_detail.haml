-# List representatives

- extends 'base.html'

- load humanize
- load representatives_extras
- load bootstrap3

- block head
  {{ position_form.media }}

- block content
  .row
    .col-md-6
      - include 'legislature/blocks/representative_block.html' with representative=representative
    .col-md-6
      %h2#votes Votes

      %table.table.table-condensed.votes
        %tr
          %th Title
          %th.icon-cell
            Memopol recommendation
          %th.icon-cell
            Representative vote
          %th.icon-cell
            Score

        - for vote in representative.votes_with_proposal.all
          %tr
            %td= vote.proposal.recommendation.title
            %td.icon-cell
              = vote.proposal.recommendation.recommendation|position_icon
            %td.icon-cell
              = vote.position|position_icon
            %td.icon-cell
              = vote.absolute_score|score_label


  %h2 Mandates

  %table.table.table-condensed.mandates
    - for mandate in representative.active_mandates
      %tr.mandate
        %td= mandate.role
        %td
          %a{:href => "{{ mandate|by_group_url }}"}
            {{ mandate.group.name }} ({{ mandate.group.abbreviation }})
        %td= mandate.begin_date
        %td= mandate.end_date
        %td= mandate.constituency.name

  .positions
    %h2 Public positions

    %table.table.table-condensed
      - for position in representative.positions.published.all
        %tr.position
          %td= position.datetime|naturalday:"d/m/Y"
          %td
            %a{:href => '{% url "positions:position-detail" position.pk %}'}
              =position.text|truncatewords:8
          %td
            = position.dossier
          %td
            %a{:href => '{{position.link}}'}
              = position.link

    %form{:action => '{% url "positions:position-create" %}',
          :method => 'post'}
      - csrf_token
      %input{:type => 'hidden',
             :name => 'representative',
             :value => '{{ representative.id }}'}

      - bootstrap_form position_form

      - buttons
        %button{'type': 'submit', 'class': 'btn btn-primary'}
          {% bootstrap_icon "star" %} Submit
      - endbuttons
